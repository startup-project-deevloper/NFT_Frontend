import React from "react";
import { useHistory } from "react-router-dom";
import { useAuth } from "shared/contexts/AuthContext";

import Box from "shared/ui-kit/Box";
import { normalNFTCardStyles } from "./index.styles";

export default function NormalNFTCard({ item, index }) {
  const classes = normalNFTCardStyles();

  const history = useHistory();

  const { isSignedin } = useAuth();

  const handleOpenDigitalArtModal = () => {
    if (isSignedin && item) {
      let queryParam = "";
      if (item.tag) queryParam += (queryParam ? "&" : "") + `blockchainTag=${item.tag}`;
      if (item.collection) queryParam += (queryParam ? "&" : "") + `collectionTag=${item.collection}`;
      history.push(
        `/pix/fractionalisation/synthetic/${encodeURIComponent(item.MediaSymbol ?? item.id)}?${queryParam}`
      );
    }
  };

  return (
    <Box display="flex" flexDirection="column" alignItems="center" onClick={handleOpenDigitalArtModal}>
      <div className={classes.card}>
        <div className={classes.innerBox}>
          <Box display="flex" justifyContent="space-between" alignItems="baseline" width={1} mb={1}>
            <div className={classes.ntfName}>{item.name}</div>
            {index % 3 === 0 ? (
              <div className={classes.liveTradingLabel}>
                <LiveTradingIcon />
                <span>Live Trading</span>
              </div>
            ) : (
              <div className={classes.liveFundingLabel}>
                <LiveFundingIcon />
                <span>Live Funding</span>
              </div>
            )}
          </Box>
          <img src={item.image} alt="nft image" />
          <div className={classes.priceSection}>
            <div>{`$${item.price}`}</div>
            <div
              style={{
                marginLeft: 8,
                color: item.delta > 0 ? "#DDFF57" : "#F43E5F",
              }}
            >
              {item && item.delta > 0 ? <UpIcon /> : <DownIcon />}
              {` ${Math.abs(item.delta)}%`}
            </div>
          </div>
          <div className={classes.volumnSection}>
            <Box color="#431AB7">VOLUME 24H</Box>
            <Box color="#FFFFFF" ml={1}>
              $785.53M
            </Box>
          </div>
          <div className={classes.volumnSection}>
            <Box color="#431AB7">LIQUIDITY</Box>
            <Box color="#FFFFFF" ml={1}>
              2.28B
            </Box>
          </div>
          <div className={classes.starGroup}>
            <Box fontSize={10.5} mr={"2px"}>
              ðŸŒŸ{" "}
            </Box>
            <Box fontSize={15.74} mr={"2px"} pt={1}>
              ðŸŒŸ{" "}
            </Box>
            <Box fontSize={10.5}>ðŸŒŸ </Box>
          </div>
        </div>
      </div>
      <div className={classes.shadow} />
    </Box>
  );
}

const UpIcon = () => (
  <svg width="10" height="13" viewBox="0 0 10 13" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M5.58262 0.461069C5.56552 0.445558 5.54937 0.43177 5.53228 0.419705C5.52373 0.412811 5.51423 0.406779 5.50473 0.399885C5.49998 0.396439 5.49618 0.393852 5.49048 0.390406C5.3537 0.297338 5.18368 0.242188 4.99941 0.242188C4.81513 0.242188 4.64606 0.297338 4.50833 0.390406C4.50263 0.394714 4.49598 0.398162 4.49028 0.403332C4.48268 0.408503 4.47509 0.413673 4.46749 0.419705C4.45039 0.432631 4.43234 0.446416 4.41524 0.46279L0.742212 3.79346C0.419263 4.08644 0.419263 4.56127 0.742212 4.85425C1.06516 5.14724 1.58855 5.14724 1.9115 4.85425L4.17315 2.80247L4.17315 11.4925C4.17315 11.907 4.54359 12.2422 4.99953 12.2422C5.45641 12.2422 5.8259 11.907 5.8259 11.4925L5.8259 2.80335L8.08755 4.85514C8.4105 5.14812 8.93389 5.14812 9.25779 4.85514C9.58074 4.56215 9.58074 4.08733 9.25779 3.79434L5.58548 0.46279L5.58262 0.461069Z"
      fill="#DDFF57"
    />
  </svg>
);

const DownIcon = () => (
  <svg width="9" height="13" viewBox="0 0 9 13" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M3.91738 12.0233C3.93448 12.0388 3.95063 12.0526 3.96772 12.0647C3.97627 12.0716 3.98577 12.0776 3.99527 12.0845C4.00002 12.0879 4.00382 12.0905 4.00952 12.094C4.1463 12.187 4.31632 12.2422 4.50059 12.2422C4.68486 12.2422 4.85394 12.187 4.99167 12.094C4.99737 12.0897 5.00402 12.0862 5.00972 12.081C5.01732 12.0759 5.02491 12.0707 5.03251 12.0647C5.04961 12.0517 5.06766 12.038 5.08475 12.0216L8.75779 8.69091C9.08074 8.39793 9.08074 7.9231 8.75779 7.63012C8.43484 7.33714 7.91145 7.33714 7.5885 7.63012L5.32685 9.68191L5.32685 0.991886C5.32685 0.577394 4.95641 0.242187 4.50047 0.242187C4.04359 0.242187 3.6741 0.577394 3.6741 0.991886L3.6741 9.68103L1.41245 7.62924C1.0895 7.33625 0.56611 7.33625 0.242212 7.62924C-0.0807374 7.92222 -0.0807375 8.39705 0.242212 8.69003L3.91452 12.0216L3.91738 12.0233Z"
      fill="#F43E5F"
    />
  </svg>
);

export const LiveFundingIcon = () => (
  <svg width="10" height="12" viewBox="0 0 10 12" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M4.75 12C3.88982 12 3.09435 11.7832 2.36358 11.3496C1.63281 10.916 1.05619 10.3242 0.633714 9.57422C0.211238 8.82422 0 8.00781 0 7.125C0 6.78125 0.0494792 6.4707 0.148438 6.19336C0.247396 5.91602 0.369191 5.66797 0.513822 5.44922C0.658453 5.23047 0.803085 4.99219 0.947716 4.73438C1.09235 4.47656 1.21414 4.13672 1.3131 3.71484C1.41206 3.29297 1.46154 2.80469 1.46154 2.25C1.46154 2.32812 1.5015 2.4043 1.58143 2.47852C1.66136 2.55273 1.75651 2.62695 1.86689 2.70117C1.97726 2.77539 2.09906 2.90625 2.23227 3.09375C2.36548 3.28125 2.47396 3.5 2.55769 3.75C2.67949 4.13281 2.8774 4.47852 3.15144 4.78711C3.42548 5.0957 3.71474 5.25 4.01923 5.25C4.41506 5.25 4.7519 5.01953 5.02975 4.55859C5.30759 4.09766 5.51312 3.47656 5.64633 2.69531C5.77955 1.91406 5.84615 1.01562 5.84615 0C5.96034 0.34375 6.13542 0.703125 6.37139 1.07812C6.60737 1.45312 6.85667 1.79297 7.11929 2.09766C7.38191 2.40234 7.65785 2.75 7.94712 3.14062C8.23638 3.53125 8.49329 3.91211 8.71785 4.2832C8.94241 4.6543 9.12891 5.08789 9.27734 5.58398C9.42578 6.08008 9.5 6.59375 9.5 7.125C9.5 8.00781 9.28876 8.82422 8.86629 9.57422C8.44381 10.3242 7.86719 10.916 7.13642 11.3496C6.40565 11.7832 5.61018 12 4.75 12ZM6.21154 4.5C5.82332 5.5625 5.45793 6.3125 5.11538 6.75C4.97075 6.9375 4.78996 7.10547 4.57302 7.25391C4.35607 7.40234 4.15815 7.52148 3.97927 7.61133C3.80038 7.70117 3.6272 7.80273 3.45974 7.91602C3.29227 8.0293 3.16096 8.17383 3.06581 8.34961C2.97065 8.52539 2.92308 8.74219 2.92308 9C2.92308 9.47656 3.10387 9.8457 3.46544 10.1074C3.82702 10.3691 4.25521 10.5 4.75 10.5C5.48077 10.5 6.08974 10.3027 6.57692 9.9082C7.0641 9.51367 7.30769 8.97656 7.30769 8.29688C7.30769 7.77344 7.26583 7.32227 7.18209 6.94336C7.09836 6.56445 7.00321 6.2832 6.89663 6.09961C6.79006 5.91602 6.66827 5.68164 6.53125 5.39648C6.39423 5.11133 6.28766 4.8125 6.21154 4.5Z"
      fill="#DDFF57"
    />
  </svg>
);

export const LiveTradingIcon = () => (
  <svg width="10" height="12" viewBox="0 0 10 12" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
      d="M4.75 12C3.88982 12 3.09435 11.7832 2.36358 11.3496C1.63281 10.916 1.05619 10.3242 0.633714 9.57422C0.211238 8.82422 0 8.00781 0 7.125C0 6.78125 0.0494792 6.4707 0.148438 6.19336C0.247396 5.91602 0.369191 5.66797 0.513822 5.44922C0.658453 5.23047 0.803085 4.99219 0.947716 4.73438C1.09235 4.47656 1.21414 4.13672 1.3131 3.71484C1.41206 3.29297 1.46154 2.80469 1.46154 2.25C1.46154 2.32812 1.5015 2.4043 1.58143 2.47852C1.66136 2.55273 1.75651 2.62695 1.86689 2.70117C1.97726 2.77539 2.09906 2.90625 2.23227 3.09375C2.36548 3.28125 2.47396 3.5 2.55769 3.75C2.67949 4.13281 2.8774 4.47852 3.15144 4.78711C3.42548 5.0957 3.71474 5.25 4.01923 5.25C4.41506 5.25 4.7519 5.01953 5.02975 4.55859C5.30759 4.09766 5.51312 3.47656 5.64633 2.69531C5.77955 1.91406 5.84615 1.01562 5.84615 0C5.96034 0.34375 6.13542 0.703125 6.37139 1.07812C6.60737 1.45312 6.85667 1.79297 7.11929 2.09766C7.38191 2.40234 7.65785 2.75 7.94712 3.14062C8.23638 3.53125 8.49329 3.91211 8.71785 4.2832C8.94241 4.6543 9.12891 5.08789 9.27734 5.58398C9.42578 6.08008 9.5 6.59375 9.5 7.125C9.5 8.00781 9.28876 8.82422 8.86629 9.57422C8.44381 10.3242 7.86719 10.916 7.13642 11.3496C6.40565 11.7832 5.61018 12 4.75 12ZM6.21154 4.5C5.82332 5.5625 5.45793 6.3125 5.11538 6.75C4.97075 6.9375 4.78996 7.10547 4.57302 7.25391C4.35607 7.40234 4.15815 7.52148 3.97927 7.61133C3.80038 7.70117 3.6272 7.80273 3.45974 7.91602C3.29227 8.0293 3.16096 8.17383 3.06581 8.34961C2.97065 8.52539 2.92308 8.74219 2.92308 9C2.92308 9.47656 3.10387 9.8457 3.46544 10.1074C3.82702 10.3691 4.25521 10.5 4.75 10.5C5.48077 10.5 6.08974 10.3027 6.57692 9.9082C7.0641 9.51367 7.30769 8.97656 7.30769 8.29688C7.30769 7.77344 7.26583 7.32227 7.18209 6.94336C7.09836 6.56445 7.00321 6.2832 6.89663 6.09961C6.79006 5.91602 6.66827 5.68164 6.53125 5.39648C6.39423 5.11133 6.28766 4.8125 6.21154 4.5Z"
      fill="#431AB7"
    />
  </svg>
);
